(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"2afb":function(t,e,n){"use strict";(function(t,e){var r=n("4ea4");n("811e");r(n("66fd"));var o=r(n("6e78"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"30db":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var r=function(){var t=this,e=t.$createElement,n=(t._self._c,t.coverImageShow?null:t.topTabNav.length),r=!t.coverImageShow&&n>0?t.__map(t.topTabNav,(function(e,n){var r=t.__get_orig(e),o=t._f("imageUrlReset")(e.icon,60,80);return{$orig:r,f0:o}})):null,o=!t.coverImageShow&&t.tabSetting?t.consultData.length:null,a=!t.coverImageShow&&t.tabSetting&&o?t.hotTopics.length:null,i=t.coverImageShow?null:t.wrapSort.sortSelect.length,s=!t.coverImageShow&&i>0?t.__map(t.wrapSort.sortSelect,(function(e,n){var r=t.__get_orig(e),o=t.activeSort(e.show_sort);return{$orig:r,m0:o}})):null;t.$mp.data=Object.assign({},{$root:{g0:n,l0:r,g1:o,g2:a,g3:i,l1:s}})},o=[]},"6e78":function(t,e,n){"use strict";n.r(e);var r=n("30db"),o=n("e60a");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("9139");var i=n("f0c5"),s=Object(i["a"])(o["default"],r["b"],r["c"],!1,null,"9fe4a5e2",null,!1,r["a"],void 0);e["default"]=s.exports},9139:function(t,e,n){"use strict";var r=n("dd5b"),o=n.n(r);o.a},c579:function(t,e,n){"use strict";(function(t){var r=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("2eee")),a=r(n("c973")),i=r(n("9523")),s=n("26cb"),c=n("24b9");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var h={components:{IndexFind:function(){n.e("components/index/find").then(function(){return resolve(n("5328"))}.bind(null,n)).catch(n.oe)},IndexAuthority:function(){n.e("components/index/authority").then(function(){return resolve(n("43c5"))}.bind(null,n)).catch(n.oe)},IndexCos:function(){n.e("components/index/cos").then(function(){return resolve(n("2658"))}.bind(null,n)).catch(n.oe)},IndexHardCore:function(){n.e("components/index/hardcore").then(function(){return resolve(n("392b"))}.bind(null,n)).catch(n.oe)},IndexTavern:function(){n.e("components/index/tavern").then(function(){return resolve(n("db4c"))}.bind(null,n)).catch(n.oe)},IndexSurvey:function(){n.e("components/index/survey").then(function(){return resolve(n("dd53"))}.bind(null,n)).catch(n.oe)},IndexFanArt:function(){n.e("components/index/fan_art").then(function(){return resolve(n("4f06"))}.bind(null,n)).catch(n.oe)},IndexStrategy:function(){n.e("components/index/strategy").then(function(){return resolve(n("fd82"))}.bind(null,n)).catch(n.oe)},ImgPopUp:function(){n.e("components/common/imgPopUp").then(function(){return resolve(n("694c"))}.bind(null,n)).catch(n.oe)},ListenOtherModul:function(){n.e("components/index/listenOtherModul").then(function(){return resolve(n("3ebf"))}.bind(null,n)).catch(n.oe)}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,s.mapState)(["windowHeight","rpxNum"])),data:function(){return{topTabData:null,topTabBackground:null,topTabNav:{},tabSetting:{current:1,tabList:["观测枢","发现","官方","酒馆","攻略","同人图","COS","硬核"],scrollLeft:0,oldScrollLeft:0},consultData:[],hotTopics:[],wrapSort:{sortSelect:[],showSort:1,sortListTop:0,sortListLeft:0,wrapType:"T"},authorityShow:!1,fixWrappShow:!1,surveyShow:!1,tavernShow:!1,strategyShow:!1,fanArtShow:!1,cosShow:!1,hardCoreShow:!1,coverImageShow:!0}},onLoad:function(){this.getIndexTopTab(),this.getIndexConsult(),this.addEventListen()},methods:{addEventListen:function(){var e=this;t.$on("openWrap",(function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"T";e.wrapSort.sortListTop=r+15,e.wrapSort.sortListLeft=n,e.wrapSort.sortSelect=t,e.wrapSort.wrapType=o,e.fixWrappShow=!0})),t.$on("changeTab",(function(t){e.tabItemClick(t)}))},getIndexTopTab:function(){var t=this;return(0,a.default)(o.default.mark((function e(){var n,r;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,c.getHomeNew)("1,3,4");case 2:n=e.sent,r=n.data.data,t.topTabData=r,t.topTabBackground=r.background,t.topTabNav=r.navigator;case 7:case"end":return e.stop()}}),e)})))()},getIndexConsult:function(){var e=this;return(0,a.default)(o.default.mark((function n(){var r,a,i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,c.getHomeNew)("4,6,7,8,9");case 2:r=n.sent,a=r.data.data,e.consultData=a.official.data,e.hotTopics=a.hot_topics.data,i=setTimeout((function(){e.coverImageShow=!1,t.showTabBar(),clearTimeout(i)}),500);case 7:case"end":return n.stop()}}),n)})))()},swiperAnimationfinish:function(t){var e=t.detail.current;this.transitionTab(e),this.swichIndexRequest(e),this.tabSetting.current=e},tabSwiper:function(t){var e=t.detail.scrollLeft;this.tabSetting.oldScrollLeft=e},sortTap:function(t,e,n){var r,o=this.wrapSort.wrapType;t!=this.wrapSort.showSort&&(this.wrapSort.showSort=t,"T"===o&&(this.$refs.indexTavern.sort.show_sort=t,this.$refs.indexTavern.sort.name=e,this.$refs.indexTavern.sort.page=1,this.$refs.indexTavern.sort.sort_type=n,this.$refs.indexTavern.getTavernPostList(1,t,20)),"S"===o&&(this.$refs.indexStrategy.sort.show_sort=t,this.$refs.indexStrategy.sort.name=e,this.$refs.indexTavern.sort.page=1,this.$refs.indexStrategy.sort.sort_type=n,this.$refs.indexStrategy.getStrategyPostList(1,n,20)),("F"===o||"C"===o||"H"===o)&&("F"===o&&(r=this.$refs.indexFanArt),"C"===o&&(r=this.$refs.indexCos),"H"===o&&(r=this.$refs.indexHardCore),r.sort.show_sort=t,r.sort.name=e,r.sort.page=1,r.sort.sort_type=n,r.sort.is_hot=!1,3===t?(r.sort.is_hot=!0,r.sort.sort_type=1,r.getForumPostList(1,20,1,!0)):r.getForumPostList(1,20,n,!1)));this.fixWrappShow=!1},activeSort:function(t){return Number(this.wrapSort.showSort)===Number(t)},tapFixWrapper:function(){this.fixWrappShow=!1},swichIndexRequest:function(t){switch(t){case 0:this.surveyShow=!0;break;case 2:this.authorityShow=!0;break;case 3:this.tavernShow=!0;break;case 4:this.strategyShow=!0;break;case 5:this.fanArtShow=!0;break;case 6:this.cosShow=!0;break;case 7:this.hardCoreShow=!0;break}},goToSearch:function(){t.$emit("navPage","search","")},tabItemClick:function(t){this.current=t,this.tabSetting.current=t,this.transitionTab(t),this.swichIndexRequest(t)},transitionTab:function(t){if([3,4,5,6].includes(t)){var e=60*(t-3);this.tabSetting.scrollLeft=this.tabSetting.oldScrollLeft,this.$nextTick((function(){this.tabSetting.scrollLeft=e}))}[0,1,2].includes(t)&&(this.tabSetting.scrollLeft=this.tabSetting.oldScrollLeft,this.$nextTick((function(){this.tabSetting.scrollLeft=0})))}}};e.default=h}).call(this,n("543d")["default"])},dd5b:function(t,e,n){},e60a:function(t,e,n){"use strict";n.r(e);var r=n("c579"),o=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=o.a}},[["2afb","common/runtime","common/vendor"]]]);