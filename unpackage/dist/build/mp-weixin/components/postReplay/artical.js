(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/postReplay/artical"],{"46ed":function(e,t,i){},"75d8":function(e,t,i){"use strict";i.r(t);var o=i("980d"),r=i.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return o[e]}))}(s);t["default"]=r.a},"980d":function(e,t,i){"use strict";(function(e){var o=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(i("2eee")),s=o(i("c973")),n=o(i("9523")),a=i("26cb"),l=i("24b9");function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var c={components:{VideoFull:function(){i.e("components/postReplay/videoFull").then(function(){return resolve(i("9ba3"))}.bind(null,i)).catch(i.oe)},ReviewsList:function(){i.e("components/common/reviewsList").then(function(){return resolve(i("539c"))}.bind(null,i)).catch(i.oe)}},props:{post_id:{type:String,default:function(){return""}}},data:function(){return{postDetail:{},userData:null,is_following:!1,is_collected:!1,choose_upvote_type:0,userLabel:"",reviewsTop:{reviewNum:0,leftType:0,rightType:0,show:!1,sortListTop:0,sortListLeft:10,sortListRight:10,rightWarp:!1,leftWarp:!1,rightTop:!0},scrollY:!0,loading:!1,refresherTrg:!1,scrollTop:0,reviewsTopFixed:"none",fixTop:0,bookUrl:"../../static/poseRequlay/book.png",likeUrl:"../../static/poseRequlay/like1.png",forumType:null,swiperCurrent:0,swiperOldCurrent:0,indiTran:0,scale:[4,5,6,7,8,9],newImageList:[],swiperHeight:0,structured_content:"",pageLoading:!0,weixinTop:0}},created:function(){this.weixinTop=170/this.rpxNum,this.getPostFullData()},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){(0,n.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},(0,a.mapState)(["windowHeight","rpxNum","emotion","emotionKey"])),methods:{getPostFullData:function(){var t=this;return(0,s.default)(r.default.mark((function i(){var o,s,n,a,p;return r.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.post_id){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,(0,l.postFullApi)(t.post_id);case 4:o=i.sent,s=o.data,t.postDetail=s.data.post,t.userData=t.postDetail.user,t.is_following=t.postDetail.user.is_following,t.is_collected=t.postDetail.self_operation.is_collected,t.postDetail.forum&&"COS"===t.postDetail.forum.name&&(t.resetSwiperHeight(t.postDetail.image_list),n=JSON.parse(t.postDetail.post.content),a=JSON.stringify(n.describe),a&&(p=a.slice(1,-1).replace(/\\n/g,"<br>"),t.structured_content=t.textParse(p,"36px"))),t.choose_upvote_type=t.postDetail.self_operation.upvote_type,t.is_collected?t.bookUrl="../../static/poseRequlay/book2.png":t.bookUrl="../../static/poseRequlay/book.png",0===t.choose_upvote_type?t.likeUrl="../../static/poseRequlay/like1.png":1===t.choose_upvote_type?t.likeUrl="../../static/poseRequlay/like2.png":t.likeUrl="../../static/poseRequlay/post_upvote_stat_".concat(t.choose_upvote_type,".png"),t.reviewsTop.reviewNum=t.postDetail.stat.reply_num,t.postDetail.vod_list[0],t.fixTop=t.weixinTop,t.$nextTick((function(){var t=this,i=e.createSelectorQuery().in(this).select(".reviewsTopRef");i.fields({rect:!0},(function(e){e&&(t.judgeTop=e.top)})).exec()})),t.pageLoading=!1;case 19:case"end":return i.stop()}}),i)})))()},interactionClick:function(e,t){var i=this;return(0,s.default)(r.default.mark((function o(){var s,n,a,p;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return s=!!(e===i.choose_upvote_type||"all"===t&&i.choose_upvote_type),n={is_cancel:s,post_id:i.post_id,upvote_type:e},o.next=4,(0,l.upvoteApi)(n);case 4:a=o.sent,p=a.data,"OK"===p.message&&(s?(i.choose_upvote_type=0,i.likeUrl="../../static/poseRequlay/like1.png"):(i.choose_upvote_type=e,i.likeUrl=1===e?"../../static/poseRequlay/like2.png":"../../static/poseRequlay/post_upvote_stat_".concat(e,".png")));case 7:case"end":return o.stop()}}),o)})))()},bookUpdate:function(){var e=this;return(0,s.default)(r.default.mark((function t(){var i,o,s,n,a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.is_collected,o=!!i,s={is_cancel:o,post_id:e.post_id},t.next=5,(0,l.collectPost)(s);case 5:n=t.sent,a=n.data,"OK"===a.message&&(e.is_collected=!i,e.is_collected?e.bookUrl="../../static/poseRequlay/book2.png":e.bookUrl="../../static/poseRequlay/book.png");case 8:case"end":return t.stop()}}),t)})))()},screenPostTip:function(){if(this.postDetail.forum){var e=2===this.postDetail.forum.game_id?"原神":"其他";this.postDetail.forum.forum_cate?(this.postTip="| ".concat(this.postDetail.forum.forum_cate.name," · ").concat(e," | ").concat(this.postDetail.forum.name),this.postTip2="".concat(this.postDetail.forum.forum_cate.name," · ").concat(e," | ").concat(this.postDetail.forum.name)):(this.postTip="| ".concat(this.postDetail.forum.name),this.postTip2="".concat(this.postDetail.forum.name))}},followUser:function(e){var t=this;return(0,s.default)(r.default.mark((function i(){var o,s,n,a;return r.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.is_following){i.next=8;break}return i.next=3,(0,l.follow)({entity_id:e});case 3:o=i.sent,s=o.data,"OK"===s.message&&(t.is_following=!0),i.next=13;break;case 8:return i.next=10,(0,l.unfollow)({entity_id:e});case 10:n=i.sent,a=n.data,"OK"===a.message&&(t.is_following=!1);case 13:case"end":return i.stop()}}),i)})))()},typeSelectLeft:function(e){var t=this;this.reviewsTop.leftType!==e&&this.$nextTick((function(){1===e?(t.$refs.reviewsListRef.is_hot=!1,t.$refs.reviewsListRef.only_master=!0,t.$refs.reviewsListRef.order_type=1,t.reviewsTop.rightTop=!1,t.$refs.reviewsListRef.lzReviewReply=!0):(t.$refs.reviewsListRef.is_hot=!0,t.$refs.reviewsListRef.only_master=!1,t.$refs.reviewsListRef.order_type=0,t.reviewsTop.rightTop=!0,t.$refs.reviewsListRef.lzReviewReply=!1),t.$refs.reviewsListRef.getPostReplayData("refresh",(function(){t.reviewsTop.leftType=e,t.scrollTop=t.oldScrollTop,t.$nextTick((function(){this.scrollTop=this.judgeTop}))}),!0)}))},typeSelectRight:function(e){var t=this;this.reviewsTop.rightType!==e&&this.$nextTick((function(){t.$refs.reviewsListRef.only_master=!1,1===e?(t.$refs.reviewsListRef.is_hot=!1,t.$refs.reviewsListRef.order_type=1):2===e?(t.$refs.reviewsListRef.is_hot=!1,t.$refs.reviewsListRef.order_type=2):(t.$refs.reviewsListRef.is_hot=!0,t.$refs.reviewsListRef.order_type=0),t.$refs.reviewsListRef.getPostReplayData("refresh",(function(){t.reviewsTop.rightType=e,t.scrollTop=t.oldScrollTop,t.$nextTick((function(){this.scrollTop=this.judgeTop}))}),!0)}))},pageScroll:function(t){var i=this,o=t.detail.scrollTop;this.oldScrollTop=o;var r=e.createSelectorQuery().in(this).select(".reviewsTopRef");r.fields({rect:!0},(function(e){e&&(e.top<i.weixinTop?i.reviewsTopFixed="flex":i.reviewsTopFixed="none")})).exec()},scrolltolower:function(){var e=this;this.$nextTick((function(){e.$refs.reviewsListRef.getPostReplayData("update")}))},scrollPull:function(e){var t=this,i=e.detail.dy,o=i>50;if(!(i<0)&&o){if(this.loading)return;this.loading=!0,this.refresherTrg=!0,this.$refs.reviewsListRef.getPostReplayData("refresh",(function(){t.loading=!1,t.refresherTrg=!1}),!0)}},resetSwiperHeight:function(e){this.swiperHeight=0;for(var t=0;t<e.length;t++){var i=e[t],o=i.width/i.height,r=void 0,s=void 0;o>1?(s=750/o,r={url:i.url,size:i.size,format:i.format,entity_type:i.entity_type,entity_id:i.entity_id,width:750,height:s}):(s=.7*this.windowHeight*this.rpxNum,r={url:i.url,size:i.size,format:i.format,entity_type:i.entity_type,entity_id:i.entity_id,width:s*o,height:s}),this.newImageList.push(r),this.swiperHeight<s&&(this.swiperHeight=s)}this.forumType=this.postDetail.forum.name},swiperChange:function(e){var t,i=e.detail.current;if(this.swiperCurrent=i,this.swiperCurrent>3){var o=this.swiperCurrent-3;t=-20*o,this.indiTran=t+"rpx",this.scale=[this.swiperCurrent+1,this.swiperCurrent+2,this.swiperCurrent-3,this.swiperCurrent-4]}else this.indiTran="0rpx",this.scale=[4,5,6];this.swiperOldCurrent=i},textParse:function(e,t){var i=e.match(/_\((.*?)\)/g),o=this.emotion;if(e=e.replace(/<img\b[^>]*src=['"]([^'"]*)['"][^>]*>/g,(function(e,t){return"<img src='".concat(t,"' ").concat("style='width: 100%; border-radius: 4px; margin: 3px 0;'",">")})),i){for(var r=[],s=0;s<i.length;s++)r.includes(i[s])||r.push(i[s]);for(var n=0;n<r.length;n++)for(var a=!1,l=0;l<o.list.length;l++){var p=o.list[l];if(!p.list)return;for(var c=p.list.length,u=0;u<c;u++){var f=p.list[u];if("_(".concat(f.name,")")===r[n]){a=!0;var d=new RegExp("_\\(".concat(f.name,"\\)"),"g"),h='<img src="'.concat(f.icon,'" class="emotionIcon" style="width: 100%"></img>');return e.replace(d,h)}}if(a)return}}return e.replace(/\n/g,"<br>")},goBack:function(){e.$emit("navGoBack","artical")},navigateToUser:function(t){e.$emit("navPage","user",t)}},filters:{changeMonAndDay:function(e){var t=new Date(1e3*parseInt(e)),i=t.getDate()<10?"0".concat(t.getDate()):t.getDate(),o=t.getMonth()+1<10?"0".concat(t.getMonth()):t.getMonth()+1;return"".concat(o,"-").concat(i)},getUserLabel:function(e){return e.certification&&e.certification.label?e.certification.label:e.introduce?e.introduce:""}}};t.default=c}).call(this,i("543d")["default"])},"9d86":function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return o}));var o={uIcon:function(){return Promise.all([i.e("common/vendor"),i.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(i.bind(null,"ee35"))}},r=function(){var e=this,t=e.$createElement,i=(e._self._c,!e.pageLoading&&e.postDetail.post&&e.userData?e._f("imageUrlReset")(e.userData.avatar_url,50,80):null),o=!e.pageLoading&&e.postDetail.post&&e.userData&&e.userData.pendant?e._f("imageUrlReset")(e.userData.pendant,50,80):null,r=!e.pageLoading&&e.postDetail.post&&"COS"!=e.forumType?e.textParse(e.postDetail.post.content,"100%"):null,s=!e.pageLoading&&e.postDetail.post&&"COS"===e.forumType&&e.newImageList&&e.swiperHeight?e.newImageList.length:null,n=!e.pageLoading&&e.postDetail.post&&"COS"===e.forumType&&e.newImageList&&e.swiperHeight?e.__map(e.newImageList,(function(t,i){var o=e.__get_orig(t),r=e.scale.includes(i);return{$orig:o,g1:r}})):null,a=!e.pageLoading&&e.postDetail.post?e.postDetail.topics.length:null,l=!e.pageLoading&&e.postDetail.post?e.__map(e.postDetail.stat.post_upvote_stat,(function(t,i){var o=e.__get_orig(t),r=e._f("resetNum")(t.upvote_cnt);return{$orig:o,f2:r}})):null,p=!e.pageLoading&&e.postDetail.post?e._f("changeMonAndDay")(e.postDetail.post.created_at):null,c=!e.pageLoading&&e.postDetail.post?e._f("resetNum")(e.reviewsTop.reviewNum):null,u=!e.pageLoading&&e.postDetail.post?e._f("resetNum")(e.postDetail.stat.like_num):null,f=!e.pageLoading&&e.postDetail.post?e._f("resetNum")(e.postDetail.stat.bookmark_num):null;e.$mp.data=Object.assign({},{$root:{f0:i,f1:o,m0:r,g0:s,l0:n,g2:a,l1:l,f3:p,f4:c,f5:u,f6:f}})},s=[]},d6f9:function(e,t,i){"use strict";var o=i("46ed"),r=i.n(o);r.a},f30d:function(e,t,i){"use strict";i.r(t);var o=i("9d86"),r=i("75d8");for(var s in r)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(s);i("d6f9");var n=i("f0c5"),a=Object(n["a"])(r["default"],o["b"],o["c"],!1,null,"230dd25b",null,!1,o["a"],void 0);t["default"]=a.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/postReplay/artical-create-component',
    {
        'components/postReplay/artical-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("f30d"))
        })
    },
    [['components/postReplay/artical-create-component']]
]);
