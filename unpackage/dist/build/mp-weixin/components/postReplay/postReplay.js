(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/postReplay/postReplay"],{"0d96":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return o}));var o={uIcon:function(){return Promise.all([i.e("common/vendor"),i.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(i.bind(null,"ee35"))},uPopup:function(){return Promise.all([i.e("common/vendor"),i.e("node-modules/uview-ui/components/u-popup/u-popup")]).then(i.bind(null,"3525"))}},s=function(){var e=this,t=e.$createElement,i=(e._self._c,!e.pageLoading&&e.postDetail.post?e._f("changeMonAndDay")(e.postDetail.post.created_at):null),o=!e.pageLoading&&e.postDetail.post?e.postDetail.topics.length:null,s=!e.pageLoading&&e.postDetail.post?e.__map(e.postDetail.stat.post_upvote_stat,(function(t,i){var o=e.__get_orig(t),s=e._f("resetNum")(t.upvote_cnt);return{$orig:o,f1:s}})):null,n=!e.pageLoading&&e.postDetail.post&&e.userData?e._f("imageUrlReset")(e.userData.avatar_url,50,80):null,r=!e.pageLoading&&e.postDetail.post&&e.userData&&e.userData.pendant?e._f("imageUrlReset")(e.userData.pendant,50,80):null,a=!e.pageLoading&&e.postDetail.post&&e.userData?e._f("getUserLabel")(e.userData):null,l=!e.pageLoading&&e.postDetail.post?e._f("changeMonAndDay")(e.postDetail.post.created_at):null,p=!e.pageLoading&&e.postDetail.post?e.postDetail.topics.length:null,c=!e.pageLoading&&e.postDetail.post?e.textParse(e.postDetail.post.content):null,u=!e.pageLoading&&e.postDetail.post?e._f("resetNum")(e.postDetail.stat.like_num):null,f=!e.pageLoading&&e.postDetail.post?e._f("resetNum")(e.postDetail.stat.bookmark_num):null;e.$mp.data=Object.assign({},{$root:{f0:i,g0:o,l0:s,f2:n,f3:r,f4:a,f5:l,g1:p,m0:c,f6:u,f7:f}})},n=[]},"4ad5":function(e,t,i){},"8ea9":function(e,t,i){"use strict";(function(e){var o=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(i("2eee")),n=o(i("c973")),r=o(i("9523")),a=i("26cb"),l=i("24b9");function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}var c={components:{VideoFull:function(){i.e("components/postReplay/videoFull").then(function(){return resolve(i("9ba3"))}.bind(null,i)).catch(i.oe)},ReviewsList:function(){i.e("components/common/reviewsList").then(function(){return resolve(i("539c"))}.bind(null,i)).catch(i.oe)}},props:{post_id:{type:String,default:function(){return""}}},data:function(){return{postDetail:{},userData:null,is_following:!1,is_collected:!1,choose_upvote_type:0,interactionBiggerImageType:0,defaultVideoData:null,userLabel:"",postTip:"",postTip2:"",reviewsTop:{leftText:"评论",rightText:"热门",reviewNum:0,leftType:0,rightType:0,show:!1,sortListTop:0,sortListLeft:10,sortListRight:10,rightWarp:!1,leftWarp:!1,rightTop:!0},hiddenContainerHeight:0,scrollY:!0,loading:!1,refresherTrg:!1,subjectPopupShow:!1,popupHeight:0,scrollTop:0,reviewsTopFixed:"none",fixTop:0,bookUrl:"../../static/poseRequlay/book.png",likeUrl:"../../static/poseRequlay/like1.png",pageLoading:!0,weixinTop:0,scrollWrapHeight:"100%"}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){(0,r.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},(0,a.mapState)(["windowHeight","rpxNum","emotion","emotionKey"])),created:function(){this.weixinTop=170/this.rpxNum,this.scrollWrapHeight=this.windowHeight-this.weixinTop+"px",this.getPostFullData()},methods:{getPostFullData:function(){var e=this;return(0,n.default)(s.default.mark((function t(){var i,o,n,r;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.post_id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,l.postFullApi)(e.post_id);case 4:i=t.sent,o=i.data,e.userData=o.data.post.user,e.is_following=o.data.post.user.is_following,e.is_collected=o.data.post.self_operation.is_collected,e.postDetail=o.data.post,e.choose_upvote_type=o.data.post.self_operation.upvote_type,e.is_collected?e.bookUrl="../../static/poseRequlay/book2.png":e.bookUrl="../../static/poseRequlay/book.png",0===e.choose_upvote_type?e.likeUrl="../../static/poseRequlay/like1.png":1===e.choose_upvote_type?e.likeUrl="../../static/poseRequlay/like2.png":e.likeUrl="../../static/poseRequlay/post_upvote_stat_".concat(e.choose_upvote_type,".png"),e.reviewsTop.reviewNum=e.postDetail.stat.reply_num,e.reviewsTop.leftText="评论(".concat(e.reviewsTop.reviewNum,")"),n=o.data.post.vod_list[0],e.screenPostTip(),e.defaultVideoData||(r=n.resolutions.length>1?n.resolutions[n.resolutions.length-1]:n.resolutions[0],e.defaultVideoData={post_id:e.post_id,src:r.url,durationTime:n.duration/1e3,currentTime:0,detail:n}),e.pageLoading=!1;case 19:case"end":return t.stop()}}),t)})))()},interactionClick:function(e,t){var i=this;return(0,n.default)(s.default.mark((function o(){var n,r,a,p,c;return s.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n=!!(e===i.choose_upvote_type||"all"===t&&i.choose_upvote_type),r={is_cancel:n,post_id:i.post_id,upvote_type:e},o.next=4,(0,l.upvoteApi)(r);case 4:a=o.sent,p=a.data,"OK"===p.message&&(n?(i.choose_upvote_type=0,i.likeUrl="../../static/poseRequlay/like1.png"):(i.choose_upvote_type=e,i.likeUrl=1===e?"../../static/poseRequlay/like2.png":"../../static/poseRequlay/post_upvote_stat_".concat(e,".png")),n||(i.interactionBiggerImageType=e,c=setTimeout((function(){i.interactionBiggerImageType=10,clearTimeout(c)}),1500)));case 7:case"end":return o.stop()}}),o)})))()},bookUpdate:function(){var e=this;return(0,n.default)(s.default.mark((function t(){var i,o,n,r,a;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.is_collected,o=!!i,n={is_cancel:o,post_id:e.post_id},t.next=5,(0,l.collectPost)(n);case 5:r=t.sent,a=r.data,"OK"===a.message&&(e.is_collected=!i,e.is_collected?e.bookUrl="../../static/poseRequlay/book2.png":e.bookUrl="../../static/poseRequlay/book.png");case 8:case"end":return t.stop()}}),t)})))()},screenPostTip:function(){if(this.postDetail.forum){var e=2===this.postDetail.forum.game_id?"原神":"其他";this.postDetail.forum.forum_cate?(this.postTip="| ".concat(this.postDetail.forum.forum_cate.name," · ").concat(e," | ").concat(this.postDetail.forum.name),this.postTip2="".concat(this.postDetail.forum.forum_cate.name," · ").concat(e," | ").concat(this.postDetail.forum.name)):(this.postTip="| ".concat(this.postDetail.forum.name),this.postTip2="".concat(this.postDetail.forum.name))}},followUser:function(e){var t=this;return(0,n.default)(s.default.mark((function i(){var o,n,r,a;return s.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.is_following){i.next=8;break}return i.next=3,(0,l.follow)({entity_id:e});case 3:o=i.sent,n=o.data,"OK"===n.message&&(t.is_following=!0,t.$refs.videoFullRef.is_following=!0),i.next=13;break;case 8:return i.next=10,(0,l.unfollow)({entity_id:e});case 10:r=i.sent,a=r.data,"OK"===a.message&&(t.is_following=!1,t.$refs.videoFullRef.is_following=!1);case 13:case"end":return i.stop()}}),i)})))()},showSort:function(e,t){this.reviewsTop.show=!0,this.scrollY=!1,"left"===t&&(this.reviewsTop.rightWarp=!1,this.reviewsTop.leftWarp=!0),"right"===t&&(this.reviewsTop.leftWarp=!1,this.reviewsTop.rightWarp=!0),this.reviewsTop.sortListTop=e.touches[0].clientY+15},fixWrappClick:function(){this.reviewsTop.show=!1,this.scrollY=!0},typeSelectLeft:function(e){var t=this;this.reviewsTop.leftType!==e&&this.$nextTick((function(){1===e?(t.$refs.reviewsListRef.is_hot=!1,t.$refs.reviewsListRef.only_master=!0,t.$refs.reviewsListRef.order_type=1,t.reviewsTop.rightTop=!1,t.$refs.reviewsListRef.lzReviewReply=!0):(t.$refs.reviewsListRef.is_hot=!0,t.$refs.reviewsListRef.only_master=!1,t.$refs.reviewsListRef.order_type=0,t.reviewsTop.rightTop=!0,t.$refs.reviewsListRef.lzReviewReply=!1),t.$refs.reviewsListRef.getPostReplayData("refresh",(function(){t.reviewsTop.leftText=1===e?"只看楼主":"评论(".concat(t.reviewsTop.reviewNum,")"),t.reviewsTop.leftType=e,t.scrollReset()}),!0)}))},typeSelectRight:function(e){var t=this;this.reviewsTop.leftType!==e&&this.$nextTick((function(){t.$refs.reviewsListRef.only_master=!1,1===e?(t.$refs.reviewsListRef.is_hot=!1,t.$refs.reviewsListRef.order_type=1):2===e?(t.$refs.reviewsListRef.is_hot=!1,t.$refs.reviewsListRef.order_type=2):(t.$refs.reviewsListRef.is_hot=!0,t.$refs.reviewsListRef.order_type=0),t.$refs.reviewsListRef.getPostReplayData("refresh",(function(){t.reviewsTop.rightText=1===e?"最早":2===e?"最新":"热门",t.reviewsTop.rightType=e,t.scrollTop=t.oldScrollTop,t.$nextTick((function(){this.scrollTop=this.judgeTop}))}),!0)}))},setHiddenContainerStyle:function(t){this.hiddenContainerHeight=t,this.$nextTick((function(){var i=this,o=this.$refs.videoFullRef;this.heightIsChange=o.video.heightIsChange,this.scrollHeightChange=o.scrollHeightChange,this.miniHeight=o.video.miniHeight,this.initHeight=t,this.diffHeight=(t-this.miniHeight)/this.rpxNum;this.windowHeight,this.miniHeight,this.rpxNum;this.diffHeight>0?(this.popupHeight=this.windowHeight-this.miniHeight/this.rpxNum-this.weixinTop+31,this.fixTop=this.miniHeight/this.rpxNum+this.weixinTop):(this.popupHeight=this.windowHeight-t/this.rpxNum-this.weixinTop+31,this.fixTop=this.initHeight/this.rpxNum+this.weixinTop);var s=setInterval((function(){var t=e.createSelectorQuery().in(i).select(".reviewsTopRef");t.fields({rect:!0},(function(e){e&&(i.judgeTop=e.top,clearInterval(s))})).exec()}),100);this.judgeTop2=this.diffHeight>0?this.miniHeight/this.rpxNum:this.initHeight/this.rpxNum}))},pageScroll:function(e){this.$nextTick((function(){var t=e.detail.scrollTop;this.oldScrollTop=t;var i=this.judgeTop-this.fixTop;this.judgeTop&&t>i?this.reviewsTopFixed="flex":this.reviewsTopFixed="none",t>this.diffHeight&&(t=this.diffHeight),this.heightIsChange&&this.scrollHeightChange(t)}))},scrolltolower:function(){var e=this;this.$nextTick((function(){e.$refs.reviewsListRef.getPostReplayData("update")}))},scrollPull:function(e){var t=this,i=e.detail.dy,o=i>50;if(!(i<0)&&o){if(this.loading)return;this.loading=!0,this.refresherTrg=!0,this.$refs.reviewsListRef.getPostReplayData("refresh",(function(){t.loading=!1,t.refresherTrg=!1}),!0)}},showSubjectDetail:function(){this.subjectPopupShow=!0,this.diffHeight>0&&(this.scrollTop=this.oldScrollTop,this.$nextTick((function(){this.scrollTop=this.diffHeight})))},closePopup:function(){this.subjectPopupShow=!1},scrollReset:function(){var e;e=this.diffHeight>0?this.miniHeight/this.rpxNum:this.initHeight/this.rpxNum;var t=this.judgeTop-e;this.scrollTop=this.oldScrollTop,this.$nextTick((function(){this.scrollTop=t}))},textParse:function(e){var t=e.match(/_\((.*?)\)/g),i=this.emotion;if(e=e.replace(/<img\b[^>]*src=['"]([^'"]*)['"][^>]*>/g,(function(e,t){return"<img src='".concat(t,"' ").concat("style='width: 100px; border-radius: 6px; display: block;'",">")})),t){for(var o=[],s=0;s<t.length;s++)o.includes(t[s])||o.push(t[s]);for(var n=0;n<o.length;n++)for(var r=!1,a=0;a<i.list.length;a++){var l=i.list[a];if(!l.list)return;for(var p=l.list.length,c=0;c<p;c++){var u=l.list[c];if("_(".concat(u.name,")")===o[n]){r=!0;var f=new RegExp("_\\(".concat(u.name,"\\)"),"g"),h='<img src="'.concat(u.icon,'"  style="height: 36px;margin-left: 5px;display:inline-block;vertical-align: bottom"></img>');return e.replace(f,h)}}if(r)return}}return e.replace(/\n/g,"<br>")},goBack:function(){e.$emit("navGoBack","postReplay")},navigateToUser:function(t){e.$emit("navPage","user",t)}},filters:{changeMonAndDay:function(e){var t=new Date(1e3*parseInt(e)),i=t.getDate()<10?"0".concat(t.getDate()):t.getDate(),o=t.getMonth()+1<10?"0".concat(t.getMonth()):t.getMonth()+1;return"".concat(o,"-").concat(i)},getUserLabel:function(e){return e.certification&&e.certification.label?e.certification.label:e.introduce?e.introduce:""}}};t.default=c}).call(this,i("543d")["default"])},ae0f:function(e,t,i){"use strict";i.r(t);var o=i("8ea9"),s=i.n(o);for(var n in o)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return o[e]}))}(n);t["default"]=s.a},c4f2:function(e,t,i){"use strict";i.r(t);var o=i("0d96"),s=i("ae0f");for(var n in s)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(n);i("ea92");var r=i("f0c5"),a=Object(r["a"])(s["default"],o["b"],o["c"],!1,null,"00ef637b",null,!1,o["a"],void 0);t["default"]=a.exports},ea92:function(e,t,i){"use strict";var o=i("4ad5"),s=i.n(o);s.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/postReplay/postReplay-create-component',
    {
        'components/postReplay/postReplay-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("c4f2"))
        })
    },
    [['components/postReplay/postReplay-create-component']]
]);
